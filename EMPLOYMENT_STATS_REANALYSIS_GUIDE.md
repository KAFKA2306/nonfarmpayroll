# 雇用統計（非農業部門雇用者数）完全再解析プロジェクト

## プロジェクト概要

本プロジェクトは、米国雇用統計（NFP: Nonfarm Payroll Employment）の信頼性を定量的に評価し、機械学習による予測モデル構築のための包括的データセットを作成することを目的とします。

### 主要目標
1. **速報値→確報値の改定誤差**を体系的に収集・分析
2. **X-13-ARIMA-SEATS**による季節調整の再評価
3. **予測誤差の統計的推定**と不確実性の定量化
4. **機械学習モデル構築**のための特徴量エンジニアリング

## 雇用統計の構造的問題と信頼性

### 1. 二重調査システムの限界
- **事業所調査**（約12万社・63万事業所）：賃金台帳ベース、回答率40%
- **家計調査**（約6万世帯）：サンプル小、変動大
- **構造的乖離**：景気転換点で誤差拡大

### 2. 改定の種類と影響度
| 改定タイプ | タイミング | 典型的な改定幅 | 影響度 |
|-----------|------------|---------------|-------|
| 第2次速報 | +1ヶ月 | ±70,000人 | 中 |
| 第3次速報 | +2ヶ月 | ±30,000人 | 小 |
| 年次ベンチマーク | +18-21ヶ月 | ±150,000人 | 大 |

### 3. 統計的不確実性
- **BLS公表標準誤差**: ±85,000人（90%信頼区間: ±136,000人）
- **実質的予測誤差帯**: ±200,000～250,000人（改定含む）
- **季節調整モデル誤差**: ±10,000～20,000人

## データ収集仕様

### 必要データ系列
```
date, first_release, second_release, third_release, final_benchmark, 
se, ci90_lower, ci90_upper, rev1_error, rev2_error, bench_error,
x11_adj, seats_adj, x11_slidingspan, seats_slidingspan, is_outlier
```

### データソース一覧
| 項目 | ソース | 形式 | 更新頻度 | 備考 |
|------|--------|------|----------|------|
| 確報値 | FRED PAYEMS | CSV API | 月次 | 上書きされるため日次スナップショット必要 |
| 速報値 | BLS Employment Situation | PDF/HTML | 月次 | 同月3回分を取得 |
| 標準誤差 | Technical Note | HTML | 年1回 | ±136,000人固定 |
| ベンチマーク改定 | CES Benchmark | HTML | 年1回 | 大幅修正の要因 |

## X-13-ARIMA-SEATS 季節調整

### モデル選択基準
1. **X-11方式**: 外れ値にロバスト、改定幅やや大
2. **SEATS方式**: 滑らか、改定小、外れ値に敏感
3. **診断統計**: Ljung-Box, M-statistics, Sliding-span

### 設定パラメータ
```r
# X-11モード
seas(ts_data, x11="", automdl=TRUE, outlier=TRUE)

# SEATSモード  
seas(ts_data, seats="", automdl=TRUE, outlier=TRUE)
```

## プロジェクト構造

```
project_root/
├─ data_raw/
│   ├─ fred_snapshots/       # PAYEMS_YYYYMMDD.csv
│   ├─ bls_pdf/             # empsit_YYYY_MM_v[1-3].pdf
│   └─ benchmark_html/       # 年次改定データ
├─ data_processed/
│   └─ nfp_revisions.feather # 統合データセット
├─ scripts/
│   ├─ 01_download_fred.py   # FRED データ取得
│   ├─ 02_parse_bls_pdf.py   # BLS PDF解析
│   ├─ 03_merge_revisions.py # 改定テーブル作成
│   └─ 04_x13_recalc.R       # 季節調整再計算
├─ analysis/
│   ├─ revision_analysis.py  # 改定パターン分析
│   └─ ml_features.py        # 特徴量エンジニアリング
├─ requirements.txt
└─ README.md
```

## 実装フロー

### Phase 1: データ収集自動化
1. **FRED API**: 月次確報値の時系列スナップショット
2. **BLS PDF**: Tabula-pyによる速報値抽出
3. **改定計算**: 各段階での差分算出

### Phase 2: 季節調整再評価
1. **X-13設定**: 自動ARIMA選択 + 外れ値検出
2. **比較分析**: X-11 vs SEATS の改定特性
3. **診断統計**: Sliding-span による安定性評価

### Phase 3: 予測モデル構築
1. **特徴量設計**: 改定方向性、季節調整誤差、外部指標
2. **不確実性モデル**: 分位点回帰による予測区間
3. **バックテスト**: 過去10年での予測精度検証

## 品質管理指標

### データ整合性チェック
- 改定系列の単調性検証
- 外れ値期間（2020年4-6月等）のフラグ付け
- 欠損値・異常値の自動検出

### 統計的妥当性
- 改定誤差の正規性テスト
- 季節調整残差の白色性検証  
- クロス検証による予測精度評価

## 次フェーズへの展開

### 特徴量エンジニアリング例
```python
# 改定方向性の連鎖パターン
df['rev_direction'] = np.sign(df['rev1_error']) * np.sign(df['rev2_error'])

# 高改定リスク月の識別
df['high_revision_risk'] = (df['x11_slidingspan'] > 0.1) | (df['seats_slidingspan'] > 0.1)

# 外れ値期間のダミー変数
df['is_pandemic'] = (df['date'] >= '2020-04-01') & (df['date'] <= '2020-06-01')
```

### モデル評価指標
- **ピンボール損失**: 分位点予測の精度評価
- **区間カバレッジ**: 予測区間の実現確率
- **改定予測精度**: 速報値公表時点での最終値予測

## 運用における活用方針

1. **速報値発表当日**: モデルによる確報値予測 + 改定確率付与
2. **改定発表時**: 予測精度の事後検証 + モデル更新
3. **年次ベンチマーク**: 大幅改定の事前警告システム
4. **政策判断支援**: 不確実性を考慮した意思決定フレームワーク

---

**重要**: 本プロジェクトは雇用統計の「絶対的真値」を求めるものではなく、統計的不確実性を適切に定量化し、予測・政策判断の精度向上を目指すものです。